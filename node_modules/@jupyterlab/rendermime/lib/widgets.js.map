{"version":3,"file":"widgets.js","sourceRoot":"","sources":["../../../../rendermime/src/widgets.ts"],"names":[],"mappings":"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","sourcesContent":["/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|----------------------------------------------------------------------------*/\nimport {\n  IRenderMime\n} from '@jupyterlab/rendermime-interfaces';\n\nimport {\n  ReadonlyJSONObject\n} from '@phosphor/coreutils';\n\nimport {\n  Message\n} from '@phosphor/messaging';\n\nimport {\n  Widget\n} from '@phosphor/widgets';\n\nimport * as renderers\n  from './renderers';\n\n\n/**\n * A common base class for mime renderers.\n */\nexport\nabstract class RenderedCommon extends Widget implements IRenderMime.IRenderer {\n  /**\n   * Construct a new rendered common widget.\n   *\n   * @param options - The options for initializing the widget.\n   */\n  constructor(options: IRenderMime.IRendererOptions) {\n    super();\n    this.mimeType = options.mimeType;\n    this.sanitizer = options.sanitizer;\n    this.resolver = options.resolver;\n    this.linkHandler = options.linkHandler;\n    this.latexTypesetter = options.latexTypesetter;\n    this.node.dataset['mimeType'] = this.mimeType;\n  }\n\n  /**\n   * The mimetype being rendered.\n   */\n  readonly mimeType: string;\n\n  /**\n   * The sanitizer used to sanitize untrusted html inputs.\n   */\n  readonly sanitizer: IRenderMime.ISanitizer;\n\n  /**\n   * The resolver object.\n   */\n  readonly resolver: IRenderMime.IResolver | null;\n\n  /**\n   * The link handler.\n   */\n  readonly linkHandler: IRenderMime.ILinkHandler | null;\n\n  /**\n   * The latexTypesetter.\n   */\n  readonly latexTypesetter: IRenderMime.ILatexTypesetter;\n\n  /**\n   * Render a mime model.\n   *\n   * @param model - The mime model to render.\n   *\n   * @returns A promise which resolves when rendering is complete.\n   */\n  renderModel(model: IRenderMime.IMimeModel): Promise<void> {\n    // TODO compare model against old model for early bail?\n\n    // Toggle the trusted class on the widget.\n    this.toggleClass('jp-mod-trusted', model.trusted);\n\n    // Render the actual content.\n    return this.render(model);\n  }\n\n  /**\n   * Render the mime model.\n   *\n   * @param model - The mime model to render.\n   *\n   * @returns A promise which resolves when rendering is complete.\n   */\n  abstract render(model: IRenderMime.IMimeModel): Promise<void>;\n}\n\n\n/**\n * A common base class for HTML mime renderers.\n */\nexport\nabstract class RenderedHTMLCommon extends RenderedCommon {\n  /**\n   * Construct a new rendered HTML common widget.\n   *\n   * @param options - The options for initializing the widget.\n   */\n  constructor(options: IRenderMime.IRendererOptions) {\n    super(options);\n    this.addClass('jp-RenderedHTMLCommon');\n  }\n}\n\n\n/**\n * A mime renderer for displaying HTML and math.\n */\nexport\nclass RenderedHTML extends RenderedHTMLCommon {\n  /**\n   * Construct a new rendered HTML widget.\n   *\n   * @param options - The options for initializing the widget.\n   */\n  constructor(options: IRenderMime.IRendererOptions) {\n    super(options);\n    this.addClass('jp-RenderedHTML');\n  }\n\n  /**\n   * Render a mime model.\n   *\n   * @param model - The mime model to render.\n   *\n   * @returns A promise which resolves when rendering is complete.\n   */\n  render(model: IRenderMime.IMimeModel): Promise<void> {\n    return renderers.renderHTML({\n      host: this.node,\n      source: String(model.data[this.mimeType]),\n      trusted: model.trusted,\n      resolver: this.resolver,\n      sanitizer: this.sanitizer,\n      linkHandler: this.linkHandler,\n      shouldTypeset: this.isAttached,\n      latexTypesetter: this.latexTypesetter\n    });\n  }\n\n  /**\n   * A message handler invoked on an `'after-attach'` message.\n   */\n  onAfterAttach(msg: Message): void {\n    if (this.latexTypesetter) {\n      this.latexTypesetter.typeset(this.node);\n    }\n  }\n}\n\n\n/**\n * A mime renderer for displaying LaTeX output.\n */\nexport\nclass RenderedLatex extends RenderedCommon {\n  /**\n   * Construct a new rendered LaTeX widget.\n   *\n   * @param options - The options for initializing the widget.\n   */\n  constructor(options: IRenderMime.IRendererOptions) {\n    super(options);\n    this.addClass('jp-RenderedLatex');\n  }\n\n  /**\n   * Render a mime model.\n   *\n   * @param model - The mime model to render.\n   *\n   * @returns A promise which resolves when rendering is complete.\n   */\n  render(model: IRenderMime.IMimeModel): Promise<void> {\n    return renderers.renderLatex({\n      host: this.node,\n      source: String(model.data[this.mimeType]),\n      shouldTypeset: this.isAttached,\n      latexTypesetter: this.latexTypesetter\n    });\n  }\n\n  /**\n   * A message handler invoked on an `'after-attach'` message.\n   */\n  onAfterAttach(msg: Message): void {\n    if (this.latexTypesetter) {\n      this.latexTypesetter.typeset(this.node);\n    }\n  }\n}\n\n\n/**\n * A mime renderer for displaying images.\n */\nexport\nclass RenderedImage extends RenderedCommon {\n  /**\n   * Construct a new rendered image widget.\n   *\n   * @param options - The options for initializing the widget.\n   */\n  constructor(options: IRenderMime.IRendererOptions) {\n    super(options);\n    this.addClass('jp-RenderedImage');\n  }\n\n  /**\n   * Render a mime model.\n   *\n   * @param model - The mime model to render.\n   *\n   * @returns A promise which resolves when rendering is complete.\n   */\n  render(model: IRenderMime.IMimeModel): Promise<void> {\n    let metadata = model.metadata[this.mimeType] as ReadonlyJSONObject;\n    return renderers.renderImage({\n      host: this.node,\n      mimeType: this.mimeType,\n      source: String(model.data[this.mimeType]),\n      width: metadata && metadata.width as number | undefined,\n      height: metadata && metadata.height as number | undefined,\n      unconfined: metadata && metadata.unconfined as boolean | undefined\n    });\n  }\n}\n\n\n/**\n * A mime renderer for displaying Markdown with embeded latex.\n */\nexport\nclass RenderedMarkdown extends RenderedHTMLCommon {\n  /**\n   * Construct a new rendered markdown widget.\n   *\n   * @param options - The options for initializing the widget.\n   */\n  constructor(options: IRenderMime.IRendererOptions) {\n    super(options);\n    this.addClass('jp-RenderedMarkdown');\n  }\n\n  /**\n   * Render a mime model.\n   *\n   * @param model - The mime model to render.\n   *\n   * @returns A promise which resolves when rendering is complete.\n   */\n  render(model: IRenderMime.IMimeModel): Promise<void> {\n    return renderers.renderMarkdown({\n      host: this.node,\n      source: String(model.data[this.mimeType]),\n      trusted: model.trusted,\n      resolver: this.resolver,\n      sanitizer: this.sanitizer,\n      linkHandler: this.linkHandler,\n      shouldTypeset: this.isAttached,\n      latexTypesetter: this.latexTypesetter,\n    });\n  }\n\n  /**\n   * A message handler invoked on an `'after-attach'` message.\n   */\n  onAfterAttach(msg: Message): void {\n    if (this.latexTypesetter) {\n      this.latexTypesetter.typeset(this.node);\n    }\n  }\n}\n\n\n/**\n * A widget for displaying SVG content.\n */\nexport\nclass RenderedSVG extends RenderedCommon {\n  /**\n   * Construct a new rendered SVG widget.\n   *\n   * @param options - The options for initializing the widget.\n   */\n  constructor(options: IRenderMime.IRendererOptions) {\n    super(options);\n    this.addClass('jp-RenderedSVG');\n  }\n\n  /**\n   * Render a mime model.\n   *\n   * @param model - The mime model to render.\n   *\n   * @returns A promise which resolves when rendering is complete.\n   */\n  render(model: IRenderMime.IMimeModel): Promise<void> {\n    let metadata = model.metadata[this.mimeType] as ReadonlyJSONObject;\n    return renderers.renderSVG({\n      host: this.node,\n      source: String(model.data[this.mimeType]),\n      trusted: model.trusted,\n      resolver: this.resolver,\n      linkHandler: this.linkHandler,\n      shouldTypeset: this.isAttached,\n      unconfined: metadata && metadata.unconfined as boolean | undefined,\n      latexTypesetter: this.latexTypesetter\n    });\n  }\n\n  /**\n   * A message handler invoked on an `'after-attach'` message.\n   */\n  onAfterAttach(msg: Message): void {\n    if (this.latexTypesetter) {\n      this.latexTypesetter.typeset(this.node);\n    }\n  }\n}\n\n\n/**\n * A widget for displaying plain text and console text.\n */\nexport\nclass RenderedText extends RenderedCommon {\n  /**\n   * Construct a new rendered text widget.\n   *\n   * @param options - The options for initializing the widget.\n   */\n  constructor(options: IRenderMime.IRendererOptions) {\n    super(options);\n    this.addClass('jp-RenderedText');\n  }\n\n  /**\n   * Render a mime model.\n   *\n   * @param model - The mime model to render.\n   *\n   * @returns A promise which resolves when rendering is complete.\n   */\n  render(model: IRenderMime.IMimeModel): Promise<void> {\n    return renderers.renderText({\n      host: this.node,\n      source: String(model.data[this.mimeType])\n    });\n  }\n}\n\n\n/**\n * A widget for displaying deprecated JavaScript output.\n */\nexport\nclass RenderedJavaScript extends RenderedCommon {\n  /**\n   * Construct a new rendered text widget.\n   *\n   * @param options - The options for initializing the widget.\n   */\n  constructor(options: IRenderMime.IRendererOptions) {\n    super(options);\n    this.addClass('jp-RenderedJavaScript');\n  }\n\n  /**\n   * Render a mime model.\n   *\n   * @param model - The mime model to render.\n   *\n   * @returns A promise which resolves when rendering is complete.\n   */\n  render(model: IRenderMime.IMimeModel): Promise<void> {\n    return renderers.renderText({\n      host: this.node,\n      source: 'JavaScript output is disabled in JupyterLab'\n    });\n  }\n}\n"]}