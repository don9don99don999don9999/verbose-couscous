{"version":3,"file":"registry.js","sourceRoot":"","sources":["../../../../rendermime/src/registry.ts"],"names":[],"mappings":"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","sourcesContent":["/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|----------------------------------------------------------------------------*/\nimport {\n  Contents, Session\n} from '@jupyterlab/services';\n\nimport {\n  IRenderMime\n} from '@jupyterlab/rendermime-interfaces';\n\nimport {\n  PathExt, URLExt\n} from '@jupyterlab/coreutils';\n\nimport {\n  IClientSession, ISanitizer, defaultSanitizer\n} from '@jupyterlab/apputils';\n\nimport {\n  ReadonlyJSONObject, Token\n} from '@phosphor/coreutils';\n\nimport {\n  MimeModel\n} from './mimemodel';\n\n\n/* tslint:disable */\n/**\n * The rendermime token.\n */\nexport\nconst IRenderMimeRegistry = new Token<IRenderMimeRegistry>('@jupyterlab/rendermime:IRenderMimeRegistry');\n\nexport\ninterface IRenderMimeRegistry extends RenderMimeRegistry {};\n/* tslint:enable */\n\n\n/* tslint:disable */\n/**\n * The latex typesetter token.\n */\nexport\nconst ILatexTypesetter = new Token<IRenderMime.ILatexTypesetter>('@jupyterlab/rendermime:ILatexTypesetter');\n\nexport\ninterface ILatexTypesetter extends IRenderMime.ILatexTypesetter {}\n/* tslint:enable */\n\n\n\n/**\n * An object which manages mime renderer factories.\n *\n * This object is used to render mime models using registered mime\n * renderers, selecting the preferred mime renderer to render the\n * model into a widget.\n *\n * #### Notes\n * This class is not intended to be subclassed.\n */\nexport\nclass RenderMimeRegistry {\n  /**\n   * Construct a new rendermime.\n   *\n   * @param options - The options for initializing the instance.\n   */\n  constructor(options: RenderMimeRegistry.IOptions = {}) {\n    // Parse the options.\n    this.resolver = options.resolver || null;\n    this.linkHandler = options.linkHandler || null;\n    this.latexTypesetter = options.latexTypesetter || null;\n    this.sanitizer = options.sanitizer || defaultSanitizer;\n\n    // Add the initial factories.\n    if (options.initialFactories) {\n      for (let factory of options.initialFactories) {\n        this.addFactory(factory);\n      }\n    }\n  }\n\n  /**\n   * The sanitizer used by the rendermime instance.\n   */\n  readonly sanitizer: ISanitizer;\n\n  /**\n   * The object used to resolve relative urls for the rendermime instance.\n   */\n  readonly resolver: IRenderMime.IResolver | null;\n\n  /**\n   * The object used to handle path opening links.\n   */\n  readonly linkHandler: IRenderMime.ILinkHandler | null;\n\n  /**\n   * The LaTeX typesetter for the rendermime.\n   */\n  readonly latexTypesetter: IRenderMime.ILatexTypesetter | null;\n\n  /**\n   * The ordered list of mimeTypes.\n   */\n  get mimeTypes(): ReadonlyArray<string> {\n    return this._types || (this._types = Private.sortedTypes(this._ranks));\n  }\n\n  /**\n   * Find the preferred mime type for a mime bundle.\n   *\n   * @param bundle - The bundle of mime data.\n   *\n   * @param preferSafe - Whether to prefer a safe factory.\n   *\n   * @returns The preferred mime type from the available factories,\n   *   or `undefined` if the mime type cannot be rendered.\n   */\n  preferredMimeType(bundle: ReadonlyJSONObject, preferSafe: boolean): string | undefined {\n    // Try to find a safe factory first, if preferred.\n    if (preferSafe) {\n      for (let mt of this.mimeTypes) {\n        if (mt in bundle && this._factories[mt].safe) {\n          return mt;\n        }\n      }\n    }\n\n    // Otherwise, search for the best factory among all factories.\n    for (let mt of this.mimeTypes) {\n      if (mt in bundle) {\n        return mt;\n      }\n    }\n\n    // Otherwise, no matching mime type exists.\n    return undefined;\n  }\n\n  /**\n   * Create a renderer for a mime type.\n   *\n   * @param mimeType - The mime type of interest.\n   *\n   * @returns A new renderer for the given mime type.\n   *\n   * @throws An error if no factory exists for the mime type.\n   */\n  createRenderer(mimeType: string): IRenderMime.IRenderer {\n    // Throw an error if no factory exists for the mime type.\n    if (!(mimeType in this._factories)) {\n      throw new Error(`No factory for mime type: '${mimeType}'`);\n    }\n\n    // Invoke the best factory for the given mime type.\n    return this._factories[mimeType].createRenderer({\n      mimeType,\n      resolver: this.resolver,\n      sanitizer: this.sanitizer,\n      linkHandler: this.linkHandler,\n      latexTypesetter: this.latexTypesetter\n    });\n  }\n\n  /**\n   * Create a new mime model.  This is a convenience method.\n   *\n   * @options - The options used to create the model.\n   *\n   * @returns A new mime model.\n   */\n  createModel(options: MimeModel.IOptions = {}): MimeModel {\n    return new MimeModel(options);\n  }\n\n  /**\n   * Create a clone of this rendermime instance.\n   *\n   * @param options - The options for configuring the clone.\n   *\n   * @returns A new independent clone of the rendermime.\n   */\n  clone(options: RenderMimeRegistry.ICloneOptions = {}): RenderMimeRegistry {\n    // Create the clone.\n    let clone = new RenderMimeRegistry({\n      resolver: options.resolver || this.resolver || undefined,\n      sanitizer: options.sanitizer || this.sanitizer || undefined,\n      linkHandler: options.linkHandler || this.linkHandler || undefined,\n      latexTypesetter: options.latexTypesetter || this.latexTypesetter\n    });\n\n    // Clone the internal state.\n    clone._factories = { ...this._factories };\n    clone._ranks = { ...this._ranks };\n    clone._id = this._id;\n\n    // Return the cloned object.\n    return clone;\n  }\n\n  /**\n   * Get the renderer factory registered for a mime type.\n   *\n   * @param mimeType - The mime type of interest.\n   *\n   * @returns The factory for the mime type, or `undefined`.\n   */\n  getFactory(mimeType: string): IRenderMime.IRendererFactory | undefined {\n    return this._factories[mimeType];\n  }\n\n  /**\n   * Add a renderer factory to the rendermime.\n   *\n   * @param factory - The renderer factory of interest.\n   *\n   * @param rank - The rank of the renderer. A lower rank indicates\n   *   a higher priority for rendering. If not given, the rank will\n   *   defer to the `defaultRank` of the factory.  If no `defaultRank`\n   *   is given, it will default to 100.\n   *\n   * #### Notes\n   * The renderer will replace an existing renderer for the given\n   * mimeType.\n   */\n  addFactory(factory: IRenderMime.IRendererFactory, rank?: number): void {\n    if (rank === undefined) {\n      rank = factory.defaultRank;\n      if (rank === undefined) {\n        rank = 100;\n      }\n    }\n    for (let mt of factory.mimeTypes) {\n      this._factories[mt] = factory;\n      this._ranks[mt] = { rank, id: this._id++ };\n    }\n    this._types = null;\n  }\n\n  /**\n   * Remove a mime type.\n   *\n   * @param mimeType - The mime type of interest.\n   */\n  removeMimeType(mimeType: string): void {\n    delete this._factories[mimeType];\n    delete this._ranks[mimeType];\n    this._types = null;\n  }\n\n  /**\n   * Get the rank for a given mime type.\n   *\n   * @param mimeType - The mime type of interest.\n   *\n   * @returns The rank of the mime type or undefined.\n   */\n  getRank(mimeType: string): number | undefined {\n    let rank = this._ranks[mimeType];\n    return rank && rank.rank;\n  }\n\n  /**\n   * Set the rank of a given mime type.\n   *\n   * @param mimeType - The mime type of interest.\n   *\n   * @param rank - The new rank to assign.\n   *\n   * #### Notes\n   * This is a no-op if the mime type is not registered.\n   */\n  setRank(mimeType: string, rank: number): void {\n    if (!this._ranks[mimeType]) {\n      return;\n    }\n    let id = this._id++;\n    this._ranks[mimeType] = { rank, id };\n    this._types = null;\n  }\n\n  private _id = 0;\n  private _ranks: Private.RankMap = {};\n  private _types: string[] | null = null;\n  private _factories: Private.FactoryMap = {};\n}\n\n\n/**\n * The namespace for `RenderMimeRegistry` class statics.\n */\nexport\nnamespace RenderMimeRegistry {\n  /**\n   * The options used to initialize a rendermime instance.\n   */\n  export\n  interface IOptions {\n    /**\n     * Intial factories to add to the rendermime instance.\n     */\n    initialFactories?: ReadonlyArray<IRenderMime.IRendererFactory>;\n\n    /**\n     * The sanitizer used to sanitize untrusted html inputs.\n     *\n     * If not given, a default sanitizer will be used.\n     */\n    sanitizer?: IRenderMime.ISanitizer;\n\n    /**\n     * The initial resolver object.\n     *\n     * The default is `null`.\n     */\n    resolver?: IRenderMime.IResolver;\n\n    /**\n     * An optional path handler.\n     */\n    linkHandler?: IRenderMime.ILinkHandler;\n\n    /**\n     * An optional LaTeX typesetter.\n     */\n    latexTypesetter?: IRenderMime.ILatexTypesetter;\n  }\n\n  /**\n   * The options used to clone a rendermime instance.\n   */\n  export\n  interface ICloneOptions {\n    /**\n     * The new sanitizer used to sanitize untrusted html inputs.\n     */\n    sanitizer?: IRenderMime.ISanitizer;\n\n    /**\n     * The new resolver object.\n     */\n    resolver?: IRenderMime.IResolver;\n\n    /**\n     * The new path handler.\n     */\n    linkHandler?: IRenderMime.ILinkHandler;\n\n    /**\n     * The new LaTeX typesetter.\n     */\n    latexTypesetter?: IRenderMime.ILatexTypesetter;\n  }\n\n  /**\n   * A default resolver that uses a session and a contents manager.\n   */\n  export\n  class UrlResolver implements IRenderMime.IResolver {\n    /**\n     * Create a new url resolver for a console.\n     */\n    constructor(options: IUrlResolverOptions) {\n      this._session = options.session;\n      this._contents = options.contents;\n    }\n\n    /**\n     * Resolve a relative url to a correct server path.\n     */\n    resolveUrl(url: string): Promise<string> {\n      if (URLExt.isLocal(url)) {\n        let cwd = PathExt.dirname(this._session.path);\n        url = PathExt.resolve(cwd, url);\n      }\n      return Promise.resolve(url);\n    }\n\n    /**\n     * Get the download url of a given absolute server path.\n     */\n    getDownloadUrl(path: string): Promise<string> {\n      if (URLExt.isLocal(path)) {\n        return this._contents.getDownloadUrl(path);\n      }\n      return Promise.resolve(path);\n    }\n\n    private _session: Session.ISession | IClientSession;\n    private _contents: Contents.IManager;\n  }\n\n  /**\n   * The options used to create a UrlResolver.\n   */\n  export\n  interface IUrlResolverOptions {\n    /**\n     * The session used by the resolver.\n     */\n    session: Session.ISession | IClientSession;\n\n    /**\n     * The contents manager used by the resolver.\n     */\n    contents: Contents.IManager;\n  }\n}\n\n\n/**\n * The namespace for the module implementation details.\n */\nnamespace Private {\n  /**\n   * A type alias for a mime rank and tie-breaking id.\n   */\n  export\n  type RankPair = { readonly id: number, readonly rank: number };\n\n  /**\n   * A type alias for a mapping of mime type -> rank pair.\n   */\n  export\n  type RankMap = { [key: string]: RankPair };\n\n  /**\n   * A type alias for a mapping of mime type -> ordered factories.\n   */\n  export\n  type FactoryMap = { [key: string]: IRenderMime.IRendererFactory };\n\n  /**\n   * Get the mime types in the map, ordered by rank.\n   */\n  export\n  function sortedTypes(map: RankMap): string[] {\n    return Object.keys(map).sort((a, b) => {\n      let p1 = map[a];\n      let p2 = map[b];\n      if (p1.rank !== p2.rank) {\n        return p1.rank - p2.rank;\n      }\n      return p1.id - p2.id;\n    });\n  }\n}\n"]}