{"version":3,"file":"registry.js","sourceRoot":"","sources":["../../../../docregistry/src/registry.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\nimport {\n  Contents, Kernel\n} from '@jupyterlab/services';\n\nimport {\n  ArrayExt, ArrayIterator, IIterator, each, empty, find, map\n} from '@phosphor/algorithm';\n\nimport {\n  JSONValue\n} from '@phosphor/coreutils';\n\nimport {\n  IDisposable, DisposableDelegate\n} from '@phosphor/disposable';\n\nimport {\n  ISignal, Signal\n} from '@phosphor/signaling';\n\nimport {\n  DockLayout, Widget\n} from '@phosphor/widgets';\n\nimport {\n  IClientSession\n} from '@jupyterlab/apputils';\n\nimport {\n  CodeEditor\n} from '@jupyterlab/codeeditor';\n\nimport {\n  IChangedArgs as IChangedArgsGeneric, PathExt\n} from '@jupyterlab/coreutils';\n\nimport {\n  IModelDB\n} from '@jupyterlab/observables';\n\nimport {\n  IRenderMime\n} from '@jupyterlab/rendermime-interfaces';\n\nimport {\n  TextModelFactory\n} from './default';\n\n\n/**\n * The document registry.\n */\nexport\nclass DocumentRegistry implements IDisposable {\n  /**\n   * Construct a new document registry.\n   */\n  constructor(options: DocumentRegistry.IOptions = {}) {\n    let factory = options.textModelFactory;\n    if (factory && factory.name !== 'text') {\n      throw new Error('Text model factory must have the name `text`');\n    }\n    this._modelFactories['text'] = factory || new TextModelFactory();\n\n    let fts = options.initialFileTypes || DocumentRegistry.defaultFileTypes;\n    fts.forEach(ft => {\n      let value: DocumentRegistry.IFileType = {\n        ...DocumentRegistry.fileTypeDefaults, ...ft\n      };\n      this._fileTypes.push(value);\n    });\n  }\n\n  /**\n   * A signal emitted when the registry has changed.\n   */\n  get changed(): ISignal<this, DocumentRegistry.IChangedArgs> {\n    return this._changed;\n  }\n\n  /**\n   * Get whether the document registry has been disposed.\n   */\n  get isDisposed(): boolean {\n    return this._isDisposed;\n  }\n\n  /**\n   * Dispose of the resources held by the document registery.\n   */\n  dispose(): void {\n    if (this.isDisposed) {\n      return;\n    }\n    this._isDisposed = true;\n    for (let modelName in this._modelFactories) {\n      this._modelFactories[modelName].dispose();\n    }\n    for (let widgetName in this._widgetFactories) {\n      this._widgetFactories[widgetName].dispose();\n    }\n    for (let widgetName in this._extenders) {\n      this._extenders[widgetName].length = 0;\n    }\n\n    this._fileTypes.length = 0;\n    Signal.clearData(this);\n  }\n\n  /**\n   * Add a widget factory to the registry.\n   *\n   * @param factory - The factory instance to register.\n   *\n   * @returns A disposable which will unregister the factory.\n   *\n   * #### Notes\n   * If a factory with the given `'displayName'` is already registered,\n   * a warning will be logged, and this will be a no-op.\n   * If `'*'` is given as a default extension, the factory will be registered\n   * as the global default.\n   * If an extension or global default is already registered, this factory\n   * will override the existing default.\n   */\n  addWidgetFactory(factory: DocumentRegistry.WidgetFactory): IDisposable {\n    let name = factory.name.toLowerCase();\n    if (this._widgetFactories[name]) {\n      console.warn(`Duplicate registered factory ${name}`);\n      return new DisposableDelegate(Private.noOp);\n    }\n    this._widgetFactories[name] = factory;\n    for (let ft of factory.defaultFor || []) {\n      if (factory.fileTypes.indexOf(ft) === -1) {\n        continue;\n      }\n      if (ft === '*') {\n        this._defaultWidgetFactory = name;\n      } else {\n        this._defaultWidgetFactories[ft] = name;\n      }\n    }\n    // For convenience, store a mapping of file type name -> name\n    for (let ft of factory.fileTypes) {\n      if (!this._widgetFactoryExtensions[ft]) {\n        this._widgetFactoryExtensions[ft] = [];\n      }\n      this._widgetFactoryExtensions[ft].push(name);\n    }\n    this._changed.emit({\n      type: 'widgetFactory',\n      name,\n      change: 'added'\n    });\n    return new DisposableDelegate(() => {\n      delete this._widgetFactories[name];\n      if (this._defaultWidgetFactory === name) {\n        this._defaultWidgetFactory = '';\n      }\n      for (let ext of Object.keys(this._defaultWidgetFactories)) {\n        if (this._defaultWidgetFactories[ext] === name) {\n          delete this._defaultWidgetFactories[ext];\n        }\n      }\n      for (let ext of Object.keys(this._widgetFactoryExtensions)) {\n        ArrayExt.removeFirstOf(this._widgetFactoryExtensions[ext], name);\n        if (this._widgetFactoryExtensions[ext].length === 0) {\n          delete this._widgetFactoryExtensions[ext];\n        }\n      }\n      this._changed.emit({\n        type: 'widgetFactory',\n        name,\n        change: 'removed'\n      });\n    });\n  }\n\n  /**\n   * Add a model factory to the registry.\n   *\n   * @param factory - The factory instance.\n   *\n   * @returns A disposable which will unregister the factory.\n   *\n   * #### Notes\n   * If a factory with the given `name` is already registered, or\n   * the given factory is already registered, a warning will be logged\n   * and this will be a no-op.\n   */\n  addModelFactory(factory: DocumentRegistry.ModelFactory): IDisposable {\n    let name = factory.name.toLowerCase();\n    if (this._modelFactories[name]) {\n      console.warn(`Duplicate registered factory ${name}`);\n      return new DisposableDelegate(Private.noOp);\n    }\n    this._modelFactories[name] = factory;\n    this._changed.emit({\n      type: 'modelFactory',\n      name,\n      change: 'added'\n    });\n    return new DisposableDelegate(() => {\n      delete this._modelFactories[name];\n      this._changed.emit({\n        type: 'modelFactory',\n        name,\n        change: 'removed'\n      });\n    });\n  }\n\n  /**\n   * Add a widget extension to the registry.\n   *\n   * @param widgetName - The name of the widget factory.\n   *\n   * @param extension - A widget extension.\n   *\n   * @returns A disposable which will unregister the extension.\n   *\n   * #### Notes\n   * If the extension is already registered for the given\n   * widget name, a warning will be logged and this will be a no-op.\n   */\n  addWidgetExtension(widgetName: string, extension: DocumentRegistry.WidgetExtension): IDisposable {\n    widgetName = widgetName.toLowerCase();\n    if (!(widgetName in this._extenders)) {\n      this._extenders[widgetName] = [];\n    }\n    let extenders = this._extenders[widgetName];\n    let index = ArrayExt.firstIndexOf(extenders, extension);\n    if (index !== -1) {\n      console.warn(`Duplicate registered extension for ${widgetName}`);\n      return new DisposableDelegate(Private.noOp);\n    }\n    this._extenders[widgetName].push(extension);\n    this._changed.emit({\n      type: 'widgetExtension',\n      name: widgetName,\n      change: 'added'\n    });\n    return new DisposableDelegate(() => {\n      ArrayExt.removeFirstOf(this._extenders[widgetName], extension);\n      this._changed.emit({\n        type: 'widgetExtension',\n        name: widgetName,\n        change: 'removed'\n      });\n    });\n  }\n\n  /**\n   * Add a file type to the document registry.\n   *\n   * @params fileType - The file type object to register.\n   *\n   * @returns A disposable which will unregister the command.\n   *\n   * #### Notes\n   * These are used to populate the \"Create New\" dialog.\n   */\n  addFileType(fileType: Partial<DocumentRegistry.IFileType>): IDisposable {\n    let value: DocumentRegistry.IFileType = {\n      ...DocumentRegistry.fileTypeDefaults, ...fileType\n    };\n    this._fileTypes.push(value);\n\n    this._changed.emit({\n      type: 'fileType',\n      name: value.name,\n      change: 'added'\n    });\n    return new DisposableDelegate(() => {\n      ArrayExt.removeFirstOf(this._fileTypes, value);\n      this._changed.emit({\n        type: 'fileType',\n        name: fileType.name,\n        change: 'removed'\n      });\n    });\n  }\n\n  /**\n   * Get a list of the preferred widget factories.\n   *\n   * @param path - The file path to filter the results.\n   *\n   * @returns A new array of widget factories.\n   *\n   * #### Notes\n   * Only the widget factories whose associated model factory have\n   * been registered will be returned.\n   * The first item is considered the default. The returned iterator\n   * has widget factories in the following order:\n   * - path-specific default factory\n   * - global default factory\n   * - all other path-specific factories\n   * - all other global factories\n   */\n  preferredWidgetFactories(path: string): DocumentRegistry.WidgetFactory[] {\n    let factories = new Set<string>();\n\n    // Get the ordered matching file types.\n    let fts = this.getFileTypesForPath(PathExt.basename(path));\n\n    // Start with the file type default factories.\n    fts.forEach(ft => {\n      if (ft.name in this._defaultWidgetFactories) {\n        factories.add(this._defaultWidgetFactories[ft.name]);\n      }\n    });\n\n    // Add the global default factory.\n    if (this._defaultWidgetFactory) {\n      factories.add(this._defaultWidgetFactory);\n    }\n\n    // Add the file type factories in registration order.\n    fts.forEach(ft => {\n      if (ft.name in this._widgetFactoryExtensions) {\n        each(this._widgetFactoryExtensions[ft.name], n => {\n          factories.add(n);\n        });\n      }\n    });\n\n    // Add the rest of the global factories, in registration order.\n    if ('*' in this._widgetFactoryExtensions) {\n      each(this._widgetFactoryExtensions['*'], n => {\n        factories.add(n);\n      });\n    }\n\n    // Construct the return list, checking to make sure the corresponding\n    // model factories are registered.\n    let factoryList: DocumentRegistry.WidgetFactory[] = [];\n    factories.forEach(name => {\n      let factory = this._widgetFactories[name];\n      if (!factory) {\n        return;\n      }\n      let modelName = factory.modelName || 'text';\n      if (modelName in this._modelFactories) {\n        factoryList.push(factory);\n      }\n    });\n\n    return factoryList;\n  }\n\n  /**\n   * Get the default widget factory for an extension.\n   *\n   * @param ext - An optional file path to filter the results.\n   *\n   * @returns The default widget factory for an extension.\n   *\n   * #### Notes\n   * This is equivalent to the first value in [[preferredWidgetFactories]].\n   */\n  defaultWidgetFactory(path?: string): DocumentRegistry.WidgetFactory {\n    if (!path) {\n      return this._widgetFactories[this._defaultWidgetFactory];\n    }\n    return this.preferredWidgetFactories(path)[0];\n  }\n\n  /**\n   * Create an iterator over the widget factories that have been registered.\n   *\n   * @returns A new iterator of widget factories.\n   */\n  widgetFactories(): IIterator<DocumentRegistry.WidgetFactory> {\n    return map(Object.keys(this._widgetFactories), name => {\n      return this._widgetFactories[name];\n    });\n  }\n\n  /**\n   * Create an iterator over the model factories that have been registered.\n   *\n   * @returns A new iterator of model factories.\n   */\n  modelFactories(): IIterator<DocumentRegistry.ModelFactory> {\n    return map(Object.keys(this._modelFactories), name => {\n      return this._modelFactories[name];\n    });\n  }\n\n  /**\n   * Create an iterator over the registered extensions for a given widget.\n   *\n   * @param widgetName - The name of the widget factory.\n   *\n   * @returns A new iterator over the widget extensions.\n   */\n  widgetExtensions(widgetName: string): IIterator<DocumentRegistry.WidgetExtension> {\n    widgetName = widgetName.toLowerCase();\n    if (!(widgetName in this._extenders)) {\n      return empty<DocumentRegistry.WidgetExtension>();\n    }\n    return new ArrayIterator(this._extenders[widgetName]);\n  }\n\n  /**\n   * Create an iterator over the file types that have been registered.\n   *\n   * @returns A new iterator of file types.\n   */\n  fileTypes(): IIterator<DocumentRegistry.IFileType> {\n    return new ArrayIterator(this._fileTypes);\n  }\n\n  /**\n   * Get a widget factory by name.\n   *\n   * @param widgetName - The name of the widget factory.\n   *\n   * @returns A widget factory instance.\n   */\n  getWidgetFactory(widgetName: string): DocumentRegistry.WidgetFactory | undefined {\n    return this._widgetFactories[widgetName.toLowerCase()];\n  }\n\n  /**\n   * Get a model factory by name.\n   *\n   * @param name - The name of the model factory.\n   *\n   * @returns A model factory instance.\n   */\n  getModelFactory(name: string): DocumentRegistry.ModelFactory | undefined {\n    return this._modelFactories[name.toLowerCase()];\n  }\n\n  /**\n   * Get a file type by name.\n   */\n  getFileType(name: string): DocumentRegistry.IFileType | undefined {\n    name = name.toLowerCase();\n    return find(this._fileTypes, fileType => {\n      return fileType.name.toLowerCase() === name;\n    });\n  }\n\n  /**\n   * Get a kernel preference.\n   *\n   * @param path - The file path.\n   *\n   * @param widgetName - The name of the widget factory.\n   *\n   * @param kernel - An optional existing kernel model.\n   *\n   * @returns A kernel preference.\n   */\n  getKernelPreference(path: string, widgetName: string, kernel?: Partial<Kernel.IModel>): IClientSession.IKernelPreference | undefined {\n    widgetName = widgetName.toLowerCase();\n    let widgetFactory = this._widgetFactories[widgetName];\n    if (!widgetFactory) {\n      return void 0;\n    }\n    let modelFactory = this.getModelFactory(widgetFactory.modelName || 'text');\n    if (!modelFactory) {\n      return void 0;\n    }\n    let language = modelFactory.preferredLanguage(PathExt.basename(path));\n    let name = kernel && kernel.name;\n    let id = kernel && kernel.id;\n    return {\n      id,\n      name,\n      language,\n      shouldStart: widgetFactory.preferKernel,\n      canStart: widgetFactory.canStartKernel\n    };\n  }\n\n  /**\n   * Get the best file type given a contents model.\n   *\n   * @param model - The contents model of interest.\n   *\n   * @returns The best matching file type.\n   */\n  getFileTypeForModel(model: Partial<Contents.IModel>): DocumentRegistry.IFileType {\n    switch (model.type) {\n    case 'directory':\n      return find(this._fileTypes, ft => ft.contentType === 'directory') || DocumentRegistry.defaultDirectoryFileType;\n    case 'notebook':\n      return find(this._fileTypes, ft => ft.contentType === 'notebook') ||\n        DocumentRegistry.defaultNotebookFileType;\n    default:\n      // Find the best matching extension.\n      if (model.name || model.path) {\n        let name = model.name || PathExt.basename(model.path);\n        let fts = this.getFileTypesForPath(name);\n        if (fts.length > 0) {\n          return fts[0];\n        }\n      }\n      return this.getFileType('text') || DocumentRegistry.defaultTextFileType;\n    }\n  }\n\n  /**\n   * Get the file types that match a file name.\n   *\n   * @param path - The path of the file.\n   *\n   * @returns An ordered list of matching file types.\n   */\n  getFileTypesForPath(path: string): DocumentRegistry.IFileType[] {\n    let fts: DocumentRegistry.IFileType[] = [];\n    let name = PathExt.basename(path);\n\n    // Look for a pattern match first.\n    let ft = find(this._fileTypes, ft => {\n      return ft.pattern && ft.pattern.match(name) !== null;\n    });\n    if (ft) {\n      fts.push(ft);\n    }\n\n    // Then look by extension name, starting with the longest\n    let ext = Private.extname(name);\n    while (ext.length > 1) {\n      ft = find(this._fileTypes, ft => ft.extensions.indexOf(ext) !== -1);\n      if (ft) {\n        fts.push(ft);\n      }\n      ext = '.' + ext.split('.').slice(2).join('.');\n    }\n    return fts;\n  }\n\n  private _modelFactories: { [key: string]: DocumentRegistry.ModelFactory } = Object.create(null);\n  private _widgetFactories: { [key: string]: DocumentRegistry.WidgetFactory } = Object.create(null);\n  private _defaultWidgetFactory = '';\n  private _defaultWidgetFactories: { [key: string]: string } = Object.create(null);\n  private _widgetFactoryExtensions: {[key: string]: string[] } = Object.create(null);\n  private _fileTypes: DocumentRegistry.IFileType[] = [];\n  private _extenders: { [key: string] : DocumentRegistry.WidgetExtension[] } = Object.create(null);\n  private _changed = new Signal<this, DocumentRegistry.IChangedArgs>(this);\n  private _isDisposed = false;\n}\n\n\n/**\n * The namespace for the `DocumentRegistry` class statics.\n */\nexport\nnamespace DocumentRegistry {\n  /**\n   * The options used to create a document registry.\n   */\n  export\n  interface IOptions {\n    /**\n     * The text model factory for the registry.  A default instance will\n     * be used if not given.\n     */\n    textModelFactory?: ModelFactory;\n\n    /**\n     * The initial file types for the registry.\n     * The [[DocumentRegistry.defaultFileTypes]] will be used if not given.\n     */\n    initialFileTypes?: DocumentRegistry.IFileType[];\n  }\n\n  /**\n   * The interface for a document model.\n   */\n  export\n  interface IModel extends IDisposable {\n    /**\n     * A signal emitted when the document content changes.\n     */\n    contentChanged: ISignal<this, void>;\n\n    /**\n     * A signal emitted when the model state changes.\n     */\n    stateChanged: ISignal<this, IChangedArgsGeneric<any>>;\n\n    /**\n     * The dirty state of the model.\n     *\n     * #### Notes\n     * This should be cleared when the document is loaded from\n     * or saved to disk.\n     */\n    dirty: boolean;\n\n    /**\n     * The read-only state of the model.\n     */\n    readOnly: boolean;\n\n    /**\n     * The default kernel name of the document.\n     */\n    readonly defaultKernelName: string;\n\n    /**\n     * The default kernel language of the document.\n     */\n    readonly defaultKernelLanguage: string;\n\n    /**\n     * The underlying `IModelDB` instance in which model\n     * data is stored.\n     *\n     * ### Notes\n     * Making direct edits to the values stored in the`IModelDB`\n     * is not recommended, and may produce unpredictable results.\n     */\n    readonly modelDB: IModelDB;\n\n    /**\n     * Serialize the model to a string.\n     */\n    toString(): string;\n\n    /**\n     * Deserialize the model from a string.\n     *\n     * #### Notes\n     * Should emit a [contentChanged] signal.\n     */\n    fromString(value: string): void;\n\n    /**\n     * Serialize the model to JSON.\n     */\n    toJSON(): JSONValue;\n\n    /**\n     * Deserialize the model from JSON.\n     *\n     * #### Notes\n     * Should emit a [contentChanged] signal.\n     */\n    fromJSON(value: any): void;\n  }\n\n  /**\n   * The interface for a document model that represents code.\n   */\n  export\n  interface ICodeModel extends IModel, CodeEditor.IModel { }\n\n  /**\n   * The document context object.\n   */\n  export\n  interface IContext<T extends IModel> extends IDisposable {\n    /**\n     * A signal emitted when the path changes.\n     */\n    pathChanged: ISignal<this, string>;\n\n    /**\n     * A signal emitted when the contentsModel changes.\n     */\n    fileChanged: ISignal<this, Contents.IModel>;\n\n    /**\n     * A signal emitted when the context is disposed.\n     */\n    disposed: ISignal<this, void>;\n\n    /**\n     * Get the model associated with the document.\n     */\n    readonly model: T;\n\n    /**\n     * The client session object associated with the context.\n     */\n    readonly session: IClientSession;\n\n    /**\n     * The current path associated with the document.\n     */\n    readonly path: string;\n\n    /**\n     * The current local path associated with the document.\n     * If the document is in the default notebook file browser,\n     * this is the same as the path.\n     */\n    readonly localPath: string;\n\n    /**\n     * The current contents model associated with the document\n     *\n     * #### Notes\n     * The contents model will be null until the context is ready.\n     * It will have an  empty `contents` field.\n     */\n    readonly contentsModel: Contents.IModel | null;\n\n    /**\n     * The url resolver for the context.\n     */\n    readonly urlResolver: IRenderMime.IResolver;\n\n    /**\n     * Whether the context is ready.\n     */\n    readonly isReady: boolean;\n\n    /**\n     * A promise that is fulfilled when the context is ready.\n     */\n    readonly ready: Promise<void>;\n\n    /**\n     * Save the document contents to disk.\n     */\n    save(): Promise<void>;\n\n    /**\n     * Save the document to a different path chosen by the user.\n     */\n    saveAs(): Promise<void>;\n\n    /**\n     * Revert the document contents to disk contents.\n     */\n    revert(): Promise<void>;\n\n    /**\n     * Create a checkpoint for the file.\n     *\n     * @returns A promise which resolves with the new checkpoint model when the\n     *   checkpoint is created.\n     */\n    createCheckpoint(): Promise<Contents.ICheckpointModel>;\n\n    /**\n     * Delete a checkpoint for the file.\n     *\n     * @param checkpointID - The id of the checkpoint to delete.\n     *\n     * @returns A promise which resolves when the checkpoint is deleted.\n     */\n    deleteCheckpoint(checkpointID: string): Promise<void>;\n\n    /**\n     * Restore the file to a known checkpoint state.\n     *\n     * @param checkpointID - The optional id of the checkpoint to restore,\n     *   defaults to the most recent checkpoint.\n     *\n     * @returns A promise which resolves when the checkpoint is restored.\n     */\n    restoreCheckpoint(checkpointID?: string): Promise<void>;\n\n    /**\n     * List available checkpoints for the file.\n     *\n     * @returns A promise which resolves with a list of checkpoint models for\n     *    the file.\n     */\n    listCheckpoints(): Promise<Contents.ICheckpointModel[]>;\n\n    /**\n     * Add a sibling widget to the document manager.\n     *\n     * @param widget - The widget to add to the document manager.\n     *\n     * @param options - The desired options for adding the sibling.\n     *\n     * @returns A disposable used to remove the sibling if desired.\n     *\n     * #### Notes\n     * It is assumed that the widget has the same model and context\n     * as the original widget.\n     */\n    addSibling(widget: Widget, options?: IOpenOptions): IDisposable;\n  }\n\n  /**\n   * A type alias for a context.\n   */\n  export\n  type Context = IContext<IModel>;\n\n\n  /**\n   * A type alias for a code context.\n   */\n  export\n  type CodeContext = IContext<ICodeModel>;\n\n  /**\n   * The options used to initialize a widget factory.\n   */\n  export\n  interface IWidgetFactoryOptions {\n    /**\n     * The name of the widget to display in dialogs.\n     */\n    readonly name: string;\n\n    /**\n     * The file types the widget can view.\n     */\n    readonly fileTypes: ReadonlyArray<string>;\n\n    /**\n     * The file types for which the factory should be the default.\n     */\n    readonly defaultFor?: ReadonlyArray<string>;\n\n    /**\n     * Whether the widget factory is read only.\n     */\n    readonly readOnly?: boolean;\n\n    /**\n     * The registered name of the model type used to create the widgets.\n     */\n    readonly modelName?: string;\n\n    /**\n     * Whether the widgets prefer having a kernel started.\n     */\n    readonly preferKernel?: boolean;\n\n    /**\n     * Whether the widgets can start a kernel when opened.\n     */\n    readonly canStartKernel?: boolean;\n  }\n\n  /**\n   * A widget for a document.\n   */\n  export\n  interface IReadyWidget extends Widget {\n    /**\n     * A promise that resolves when the widget is ready.\n     */\n    readonly ready: Promise<void>;\n  }\n\n  /**\n   * The options used to open a widget.\n   */\n  export\n  interface IOpenOptions {\n    /**\n     * The reference widget id for the insert location.\n     *\n     * The default is `null`.\n     */\n    ref?: string | null;\n\n    /**\n     * The supported insertion modes.\n     *\n     * An insert mode is used to specify how a widget should be added\n     * to the main area relative to a reference widget.\n     */\n    mode?: DockLayout.InsertMode;\n  }\n\n  /**\n   * The interface for a widget factory.\n   */\n  export\n  interface IWidgetFactory<T extends IReadyWidget, U extends IModel> extends IDisposable, IWidgetFactoryOptions {\n    /**\n     * A signal emitted when a widget is created.\n     */\n    widgetCreated: ISignal<IWidgetFactory<T, U>, T>;\n\n    /**\n     * Create a new widget given a context.\n     *\n     * #### Notes\n     * It should emit the [widgetCreated] signal with the new widget.\n     */\n    createNew(context: IContext<U>): T;\n  }\n\n  /**\n   * A type alias for a standard widget factory.\n   */\n  export\n  type WidgetFactory = IWidgetFactory<IReadyWidget, IModel>;\n\n  /**\n   * An interface for a widget extension.\n   */\n  export\n  interface IWidgetExtension<T extends Widget, U extends IModel> {\n    /**\n     * Create a new extension for a given widget.\n     */\n    createNew(widget: T, context: IContext<U>): IDisposable;\n  }\n\n  /**\n   * A type alias for a standard widget extension.\n   */\n  export\n  type WidgetExtension = IWidgetExtension<Widget, IModel>;\n\n  /**\n   * The interface for a model factory.\n   */\n  export\n  interface IModelFactory<T extends IModel> extends IDisposable {\n    /**\n     * The name of the model.\n     */\n    readonly name: string;\n\n    /**\n     * The content type of the file (defaults to `\"file\"`).\n     */\n    readonly contentType: Contents.ContentType;\n\n    /**\n     * The format of the file (defaults to `\"text\"`).\n     */\n    readonly fileFormat: Contents.FileFormat;\n\n    /**\n     * Create a new model for a given path.\n     *\n     * @param languagePreference - An optional kernel language preference.\n     *\n     * @returns A new document model.\n     */\n    createNew(languagePreference?: string, modelDB?: IModelDB): T;\n\n    /**\n     * Get the preferred kernel language given a file path.\n     */\n    preferredLanguage(path: string): string;\n  }\n\n  /**\n   * A type alias for a standard model factory.\n   */\n  export\n  type ModelFactory = IModelFactory<IModel>;\n\n  /**\n   * A type alias for a code model factory.\n   */\n  export\n  type CodeModelFactory = IModelFactory<ICodeModel>;\n\n  /**\n   * An interface for a file type.\n   */\n  export\n  interface IFileType {\n    /**\n     * The name of the file type.\n     */\n    readonly name: string;\n\n    /**\n     * The mime types associated the file type.\n     */\n    readonly mimeTypes: ReadonlyArray<string>;\n\n    /**\n     * The extensions of the file type (e.g. `\".txt\"`).  Can be a compound\n     * extension (e.g. `\".table.json`).\n     */\n    readonly extensions: ReadonlyArray<string>;\n\n    /**\n     * An optional display name for the file type.\n     */\n    readonly displayName?: string;\n\n    /**\n     * An optional pattern for a file name (e.g. `^Dockerfile$`).\n     */\n    readonly pattern?: string;\n\n    /**\n     * The icon class name for the file type.\n     */\n    readonly iconClass?: string;\n\n    /**\n     * The icon label for the file type.\n     */\n    readonly iconLabel?: string;\n\n    /**\n     * The content type of the new file.\n     */\n    readonly contentType: Contents.ContentType;\n\n    /**\n     * The format of the new file.\n     */\n    readonly fileFormat: Contents.FileFormat;\n  }\n\n  /**\n   * The defaults used for a file type.\n   */\n  export\n  const fileTypeDefaults: IFileType = {\n    name: 'default',\n    extensions: [],\n    mimeTypes: [],\n    iconClass: 'jp-MaterialIcon jp-FileIcon',\n    iconLabel: '',\n    contentType: 'file',\n    fileFormat: 'text'\n  };\n\n  /**\n   * An arguments object for the `changed` signal.\n   */\n  export\n  interface IChangedArgs {\n    /**\n     * The type of the changed item.\n     */\n    readonly type: 'widgetFactory' | 'modelFactory' | 'widgetExtension' | 'fileType';\n\n    /**\n     * The name of the item or the widget factory being extended.\n     */\n    readonly name: string;\n\n    /**\n     * Whether the item was added or removed.\n     */\n    readonly change: 'added' | 'removed';\n  }\n\n  /**\n   * The default text file type used by the document registry.\n   */\n  export\n  const defaultTextFileType: IFileType = {\n    ...fileTypeDefaults,\n    name: 'text',\n    mimeTypes: ['text/plain'],\n    extensions: ['.txt']\n  };\n\n  /**\n   * The default notebook file type used by the document registry.\n   */\n  export\n  const defaultNotebookFileType: IFileType = {\n    ...fileTypeDefaults,\n    name: 'notebook',\n    displayName: 'Notebook',\n    mimeTypes: ['application/x-ipynb+json'],\n    extensions: ['.ipynb'],\n    contentType: 'notebook',\n    fileFormat: 'json',\n    iconClass: 'jp-MaterialIcon jp-NotebookIcon'\n  };\n\n  /**\n   * The default directory file type used by the document registry.\n   */\n  export\n  const defaultDirectoryFileType: IFileType = {\n    ...fileTypeDefaults,\n    name: 'directory',\n    extensions: [],\n    mimeTypes: ['text/directory'],\n    contentType: 'directory',\n    iconClass: 'jp-MaterialIcon jp-OpenFolderIcon'\n  };\n\n  /**\n   * The default file types used by the document registry.\n   */\n  export\n  const defaultFileTypes: ReadonlyArray<Partial<IFileType>> = [\n    defaultTextFileType,\n    defaultNotebookFileType,\n    defaultDirectoryFileType,\n    {\n      name: 'markdown',\n      displayName: 'Markdown File',\n      extensions: ['.md'],\n      mimeTypes: ['text/markdown'],\n      iconClass: 'jp-MaterialIcon jp-MarkdownIcon',\n    },\n    {\n      name: 'python',\n      displayName: 'Python File',\n      extensions: ['.py'],\n      mimeTypes: ['text/x-python'],\n      iconClass: 'jp-MaterialIcon jp-PythonIcon'\n    },\n    {\n      name: 'json',\n      displayName: 'JSON File',\n      extensions: ['.json'],\n      mimeTypes: ['application/json'],\n      iconClass: 'jp-MaterialIcon jp-JSONIcon'\n    },\n    {\n      name: 'csv',\n      displayName: 'CSV File',\n      extensions: ['.csv'],\n      mimeTypes: ['text/csv'],\n      iconClass: 'jp-MaterialIcon jp-SpreadsheetIcon'\n    },\n    {\n      name: 'xls',\n      displayName: 'Spreadsheet',\n      extensions: ['.xls'],\n      iconClass: 'jp-MaterialIcon jp-SpreadsheetIcon'\n    },\n    {\n      name: 'r',\n      displayName: 'R File',\n      mimeTypes: ['text/x-rsrc'],\n      extensions: ['.r'],\n      iconClass: 'jp-MaterialIcon jp-RKernelIcon'\n    },\n    {\n      name: 'yaml',\n      displayName: 'YAML File',\n      mimeTypes: ['text/x-yaml', 'text/yaml'],\n      extensions: ['.yaml', '.yml'],\n      iconClass: 'jp-MaterialIcon jp-YamlIcon'\n    },\n    {\n      name: 'svg',\n      displayName: 'Image',\n      mimeTypes: ['image/svg+xml'],\n      extensions: ['.svg'],\n      iconClass: 'jp-MaterialIcon jp-ImageIcon',\n      fileFormat: 'base64'\n    },\n    {\n      name: 'tiff',\n      displayName: 'Image',\n      mimeTypes: ['image/tiff'],\n      extensions: ['.tif', '.tiff'],\n      iconClass: 'jp-MaterialIcon jp-ImageIcon',\n      fileFormat: 'base64'\n    },\n    {\n      name: 'jpeg',\n      displayName: 'Image',\n      mimeTypes: ['image/jpeg'],\n      extensions: ['.jpg', '.jpeg'],\n      iconClass: 'jp-MaterialIcon jp-ImageIcon',\n      fileFormat: 'base64'\n    },\n    {\n      name: 'gif',\n      displayName: 'Image',\n      mimeTypes: ['image/gif'],\n      extensions: ['.gif'],\n      iconClass: 'jp-MaterialIcon jp-ImageIcon',\n      fileFormat: 'base64'\n    },\n    {\n      name: 'png',\n      displayName: 'Image',\n      mimeTypes: ['image/png'],\n      extensions: ['.png'],\n      iconClass: 'jp-MaterialIcon jp-ImageIcon',\n      fileFormat: 'base64'\n    },\n    {\n      name: 'bmp',\n      displayName: 'Image',\n      mimeTypes: ['image/bmp'],\n      extensions: ['.bmp'],\n      iconClass: 'jp-MaterialIcon jp-ImageIcon',\n      fileFormat: 'base64'\n    },\n  ];\n}\n\n\n/**\n * A private namespace for DocumentRegistry data.\n */\nnamespace Private {\n  /**\n   * Get the extension name of a path.\n   *\n   * @param file - string.\n   *\n   * #### Notes\n   * Dotted filenames (e.g. `\".table.json\"` are allowed).\n   */\n  export\n  function extname(path: string): string {\n    let parts = PathExt.basename(path).split('.');\n    parts.shift();\n    let ext = '.' + parts.join('.');\n    return ext.toLowerCase();\n  }\n  /**\n   * A no-op function.\n   */\n  export\n  function noOp() { /* no-op */}\n}\n"]}